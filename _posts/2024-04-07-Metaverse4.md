---
layout: post
title:  "UI and Director Project"
---

# UI and Director Project
Learn how to display the progress or status of the game and create messages <br/>
Chapter 4 is about 'Car Stopping Game' <br/>
How to create game-like elements such as a UI that displays scores and sound effects." <br/>

## Designing Games
Chapter 3 is more like an example than a game <br/>
From Chapter 4, various elements will be added such as UI and sound effects to make it look more like a game <br/>
However, it's hard to learn everything at once <br/>
In Chapter 4, a slightly more complex example than in Chapter 3 will be created, and gradually learn how to display UI and write director objects." <br/>
### Planning the Game
In Chapter 4, a 'Car Stopping Game' is created where the car goes near the flag and stops <br/>
The game screen is as follows: <br/>
When the game starts, a car is displayed at the bottom left of the screen, and when the screen is swiped, the car starts running and then gradually slows down and stops <br/>
The length of the swipe can be adjusted to change the driving distance of the car <br/>
A flag is displayed at the bottom right of the screen, and the distance between the car and the flag is shown in the center of the screen <br/>
![Metaverse4-1](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/437eb395-21cd-45c7-8b43-22f2ff37817f) <br/>
Thinking About Game Resources <br/>
Let's design the game based on the game screen <br/>
As with Chapter 3, the design goes through five stages <br/>
1st Stage: List all the objects that will be placed on the screen <br/>
2nd Stage: Decide on the controller script that can move the objects <br/>
3rd Stage: Decide on the generator script that can automatically create objects <br/>
4th Stage: Prepare the director script that can update the UI <br/>
5th Stage: Think about the flow of creating scripts. <br/>
Stage 1: List All Objects to Be Placed on the Screen <br/>
List all the objects that will be placed on the screen <br/>
Looking at the game screen in Figure 4-1, think about what objects are needed <br/>
For now, the 'car' and 'flag', though not conspicuous, the 'ground', and the 'UI displaying the distance' are visible." <br/>
![Metaverse4-2](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/fda22499-aa28-4a36-ba5e-159fb16e973d) <br/>

Stage 2: Determine the Controller Script That Can Move Objects <br/>
From the objects listed in Stage 1, identify those that move <br/>
The car moves, so it is a moving object, while the flag and the ground are stationary, so they are not moving objects <br/>
The UI that displays the distance between the car and the flag changes its display content, but not its display position, so it is also not a moving object <br/>
![Metaverse4-3](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/5ce97e6f-7888-490f-87c4-096fc4561088) <br/>
Moving objects require a script (controller script) to control their movement. <br/>
Therefore, in this game, a 'Car Controller' is needed as the script to control the movement of the car <br/>
Required controller script: Car Controller <br/>
Stage 3: Determine the Generator Script That Can Automatically Create Objects <br/>
Find objects that will be created during gameplay <br/>
In the Car Stopping Game, there are no objects that will be created during play <br/>
Stage 4: Prepare the Director Script to Update the UI <br/>
In a play, the director understands the progress of the play and gives instructions to the actors <br/>
Similarly, in a game, a director script is necessary to smoothly continue the play <br/>
In this game, since the distance between the car and the flag needs to be displayed on the UI, a director script must be written <br/>
Required director script: <br/>
A director capable of updating the UI <br/>
![Metaverse4-4](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/c2bc26ba-c55e-4978-a6c8-40b9eda6e940) <br/>
Stage 5: Think About the Flow of Creating Scripts <br/>
Consider how to progress the game based on each script <br/>
Basically, the flow is Controller Script -> Generator Script -> Director Script <br/>
![Metaverse4-5](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/7bf8c0de-50a5-4b17-844d-69e6e198fd4b) <br/>
"In Chapter 4, the scripts to be created are 'Car Controller' and 'Game Scene Director' <br/>
With just these two scripts, movement can be expressed in the 'Car Stopping Game'." <br/>
Car Controller <br/>
Swipe to start running, then gradually decelerate to a stop <br/>
Also, make the running distance change according to the length of the swipe <br/>
Director Capable of Updating UI <br/>
Finds out the coordinates of the 'car' and 'flag' and displays the distance between them on the UI <br/>
The roulette and car created in Chapter 3 may look different but the creation order is the same <br/>
The method of creating a moving object is always the same, so practice and remember the flow! <br/>
The game being created now also uses a UI along with moving objects <br/>
The order of writing UI is always the same as for moving objects, so be sure to remember it <br/>
The game creation flow can be summarized as follows: <br/>
![Metaverse4-6](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/a4ae93d3-2558-4fad-a08a-1ce9d4fa3c99) <br/>


## Creating a Project and Scene
### Creating a Project
First, create a project <br/>
Click on New Project from the screen displayed when running Unity Hub <br/>
Select the template as 2D, and enter the project name as SwipeCar <br/>
Clicking on Create Project at the bottom right creates the project in the specified folder and runs the Unity Editor <br/>
Template Selection -> 2D <br/>
Project Creation -> SwipeCar" <br/>
![Metaverse4-7](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/fb059f8f-b341-44a1-9d94-343b86979dbc) <br/>
![Metaverse4-8](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/b6ee594e-1e7b-41d2-b27c-7ea9c3802f6a) <br/>
**Adding Resources to the Project** <br/>
Once the Unity Editor is running, add the resources to be used in this game to the project <br/>
Open the chapter4 folder in the downloaded Resource folder and drag & drop all the resources into the Project window <br/>
The roles of the files to be used in the game are as follows <br/>
![Metaverse4-9](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/93abb7b3-e3e3-4edd-bc6f-f93b34d9c80a) <br/>

### Setting Up for Smartphones 
We will set it up to be able to build for smartphones <br/>
Select File > Build Settings from the toolbar <br/>
In the Build Settings window, select iOS as the Platform and click on Switch Platform <br/>
![Metaverse4-10](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/57468e02-020c-484c-a164-47d07eff57f0) <br/>
Setting Screen Size <br/>
We will set the game screen size <br/>
This time, we will create a wide screen <br/>
Click the Game tab in the Scene view and open the screen size (Free Aspect) list located at the top left of the Game view <br/>
Select a size that matches the target smartphone's screen size (select iPhone 11 Pro 2436 * 1125 Landscape) <br/>

### Saving the Scene
We will create a scene <br/>
Select File > Save As from the toolbar and save the scene name as Game Scene <br/>
A scene icon appears in the Project window of the Unity Editor <br/>
Write Scene > GameScene <br/>
![Metaverse4-12](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/b21a1abd-4320-4db3-8074-a7412f464855) <br/>
Placing Objects in the Scene <br/>
Placing the Ground <br/>
We will place the objects needed for the game in the scene <br/>
The objects to be placed here are the ground, car, and flag <br/>
First, place the ground in the scene <br/>
Click the Scene tab, and drag & drop the ground image from the Project window into the Scene view <br/>
The sprite appears in the Scene view and ground is also displayed in the Hierarchy window <br/>
![Metaverse4-14](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/be4d8e4c-ea1a-4afd-9f1e-74d9d7390a5d) <br/>
![Metaverse4-13](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/0b45050a-4b43-4452-ba5b-8409ccdad04e) <br/>
Continue to adjust the position and size of the ground in the Inspector window <br/>
Click on ground in the Hierarchy window, and its details will be displayed in the Inspector window, so specify the coordinates and size for placement <br/>
Set the Position in the Transform section to 0, -5, 0 and Scale to 18, 1, 1 <br/>
The position and size on the screen above the Scene view change according to the settings in the Inspector window <br/>
![Metaverse4-15](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/d1e1988a-44d7-4a9e-92de-154333520692) <br/>
![Metaverse4-16](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/87b7d69c-ffc4-4652-8999-7162aae4868b) <br/>

### Placing the Car
Next, place the car <br/> 
Drag & drop the car image into the Scene view <br/>
The sprite is displayed in the Scene view, and car is also displayed in the Hierarchy window <br/>
![Metaverse4-17](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/b57003dd-1400-4e00-8b56-dee499ef2dda) <br/>
Continue to adjust the position of the car in the Inspector window <br/>
Just like with the ground, click on car in the Hierarchy window and specify the coordinates in the Inspector window <br/>
Set the Position in the Transform section to -7, -3.7, 0 <br/>
![Metaverse4-18](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/55da6647-766e-4e37-be3a-a9353dcc5424) <br/>
![Metaverse4-19](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/efcda020-b540-4339-a54b-e16a7800935d) <br/>
### Placing the Flag
Finally, let's place the flag <br/>
Drag & drop the flag image into the Scene view <br/>
The sprite appears in the Scene view, and flag is also displayed in the Hierarchy window <br/>
Click on flag in the Hierarchy window and set the Position in the Transform section to 7.5, -3.5, 0 in the Inspector window <br/>
![Metaverse4-20](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/92c2ef47-73a8-4f18-9177-2c195bee7793) <br/>
![Metaverse4-21](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/109fca28-6788-4353-9f5b-9a20a7d1548e) <br/>
### Changing the Background Color
The background color is blue, which looks too strong, so I will change it to a lighter color <br/>
The background color can be changed in the Inspector window of the Camera object <br/>
Click on Main Camera in the Hierarchy window, <br/>
and then click on the Background color bar in the Camera section of the Inspector window <br/>
When the Color window appears, set the Hexadecimal to DEDBD2. <br/>
![Metaverse4-22](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/5788d235-ea7e-4522-848f-862b29c59a41) <br/>
![Metaverse4-23](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/0213cdbb-023c-4b85-b776-3ff6bb1447a2) <br/>
Next, let's move the car <br/>
## Moving the car with a swipe
### Writing the Car Script
Let's move the car <br/>
To move the car, a script (controller script) that describes how to move the car is needed <br/>
Let's write the car script according to the 'method of creating a moving object' and apply it to the car object." <br/>
How to Create a Moving Object <br/>
(1)Place the object in the Scene view <br/>
(2)Write a script that describes how to move the object <br/>
(3)Apply the written script to the object <br/>
Now that we have placed the objects, we will start writing scripts from now on <br/>
![Metaverse4-24](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/39ac3729-1d65-47eb-b18b-ec35db9fb91b) <br/>
At the end, we need to determine the car's moving distance based on the swipe length, but if we start with something difficult, we may not know how to begin and can get flustered <br/>
At this time, we should first write up to the part where the car starts moving and gradually decelerates to a stop when the screen is clicked <br/>
The action of the car running and stopping is structurally similar to the action of the roulette stopping after spinning, which was learned in a previous chapter <br/>
Let's write a script where 'the car runs and then gradually stops when clicked <br/>
Right-click in the Project window, select Create > C# Script to create a script file <br/>
Change the filename to CarController <br/>
Script Writing -> CarController <br/>
![Metaverse4-25](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/6c94be43-dd72-4bd6-b923-06dd5fd8710e) <br/>
In the Project window, double-click on CarController to open the file and enter the script as follows <br/>
```
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class CarController : MonoBehaviour
{
  float speed = 0;

  void Start()
  {
    Application.targetFrameRate = 60;
  }

  void Update()
  {
    if (Input.GetMouseButtonDown(0)) //When the mouse is clicked
    {
      this.speed = 0.2f; //처음 속도를 설정한다
    }
    transform.Translate(this.speed, 0, 0); //이동
    this.speed *= 0.98f;  //감속
  }
}
```
![Metaverse4-26](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/d014f4e2-b6dc-4408-8d4c-8ee7aaa6c404) <br/>
The script in the code above has the same rotation structure as the roulette created in the previous chapter <br/>
The car's speed is managed by the speed variable <br/>
At the start of the game, the speed is 0, so the car does not move <br/>
However, when clicked, a value is set to speed, and the car starts moving <br/>
For car movement, the Translate method is used <br/>
The car runs at the speed set in speed <br/>
Translate is a method that moves the game object by the argument value from its current coordinates <br/>
The argument does not directly represent the current coordinate values <br/>
It represents the relative movement value from the current coordinates <br/>
For example, Translate(0, 3, 0) does not mean moving to the coordinates 0, 3, 0, but rather moving 3 units in the Y-axis direction from the current point <br/>
![Metaverse4-27](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/b34dd112-61db-4abc-99e7-27b959903889) <br/>
To gradually reduce the car's speed, deceleration is handled on line 22 <br/>
The speed variable is multiplied by 0.98 to gradually decrease the speed with each frame <br/>
This approach to deceleration is the same as seen in the roulette in Chapter 3 <br/>
Also, by fixing the frame rate to 60 in the Start method, the game's execution speed is made independent of PC performance <br/>
**Let's try it!**  <br/>
Change the initial speed of 0.2 (line 18) and the damping coefficient of 0.98 (line 22) to make the car move at different speeds <br/>
Usually, when making a game, these parameters are adjusted at the end to make the game feel fun <br/>
![Metaverse4-28](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/d00eea94-2f2c-4697-830a-27543a097ecd) <br/>
![Metaverse4-29](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/c3f1a7c0-269b-44a5-a7b9-6f023a32e0ba) <br/>
Applying the Script to the Car Object <br/>
Apply the Car Controller we wrote earlier to the car's sprite (similar to handing a script to an actor) <br/>
Drag & drop the CarController script from the Project window to the car object in the Hierarchy window <br/>
If you look at the Inspector window, you can see that the CarController script has been applied to the car object <br/>
Since the script has been applied to the car (like handing a script to an actor), check if the car moves by clicking <br/>
When you run the game and click on the screen, the car will run <br/>
![Metaverse4-30](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/1b45f6ef-562f-48b4-91c9-a5880607f233) <br/>
### Change the Car's Moving Distance According to the Swipe Length
The car moves, but the fun is lost if the moving distance is the same every time <br/>
Let's modify it so that the car's moving distance changes according to the swipe length <br/>
Here, we consider the mouse dragging action as the swipe action on a smartphone <br/>
To change the car's moving distance according to the swipe length (=drag length), it's good to set the swipe length as the car's initial speed (line 18) <br/>
If the swipe length is short, the initial speed value decreases, running only a short distance, and if the swipe length is long, the initial speed value increases, running a longer distance <br/>
![Metaverse4-31](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/cb8537fa-8fc2-4f5f-8a07-e4d0b6fe7bca) <br/>
How can we calculate the swipe length? <br/>
If we know the coordinates where the click started and where it ended, we can use their difference as the swipe length <br/>
The moments when the click starts and ends can be determined with the GetMouseButtonDown and GetMouseButtonUp methods <br/>
We obtain the mouse coordinates (Input.mousePosition) at each point and calculate the difference between the two coordinates to determine the swipe length value <br/>
```
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class CarController : MonoBehaviour
{
  float speed = 0;
  Vector2 startPos;

  void Start()
  {
    Application.targetFrameRate = 60;
  }
  void Update()
  {
    //Calculates the swipe length (added)
    if (Input.GetMouseButtonDown(0))
    {
      //Coordinates where the mouse is clicked
      this.startPos = Input.mousePosition;
    }
    else if (Input.GetMouseButtonUp(0))
    {
      //Coordinates when the finger is lifted off the mouse button
      Vector2 endPos = Input.mousePosition;
      float swipeLength = endPos.x - this.startPos.x;
      
      //Changes the length of the swipe to the initial speed
      this.speed = swipeLength / 500.0f;
    }

    transform.Translate(this.speed, 0, 0); //Move
    this.speed *= 0.98f;  //Decelerate
  }
}
```
In the Update method, detect the coordinates at the start(GetMouseButtonDown) and end points(GetMouseButtonUp) of a click <br/>
The coordinates at the start point are assigned to startPos, and those at the end point are assigned to endPos <br/>
Input.mousePosition contains the mouse coordinates at the moments when GetMouseButtonDown and GetMouseButtonUp methods return true <br/>
On line 27, the distance between the two points in the X-axis direction is assigned as the swipe length <br/>
On line 30, the length of the swipe is converted into the car's speed <br/>
Click the run tool to check if the car's driving distance changes according to the swipe length <br/>
![Metaverse4-32](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/4c58007e-3ed1-4e68-a626-02be9b82a8fc) <br/>
![Metaverse4-33](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/e7753e16-bfe2-4f9d-aafc-4493137ac7f0) <br/>
The car moves using the controller script! <br/>
The key to creating scripts effectively is to start with simple movements and gradually add features <br/>
Even scripts that require complex processing should start simple, and as you gradually add features, even complex processes can be written relatively easily <br/>
In the next section, we will create a UI that displays the distance between the car and the flag, so we can tell whether the car has stopped in front of the flag or has passed it. <br/>
**Let's try it!** <br/>
On line 30, we divided by 500.0 to set the swipe length as the initial speed <br/>
Changing this value will alter the car's initial speed <br/>
If you want to change the speed or moving distance of the car, try modifying this value <br/>
**Tips** <br/>
World Coordinate System and Local Coordinate System <br/>
The world coordinate system indicates where an object is located on the game board <br/>
The coordinates set in the Inspector window so far are in the world coordinate system <br/>
On the other hand, the local coordinate system is the coordinate system individually possessed by game objects <br/>
When using the Translate method, the direction of movement is calculated not in the world coordinate system but in the local coordinate system <br/>
Therefore, if the object rotates, the direction is calculated based on the rotated coordinate system <br/>
Care must be taken when an object is moving while rotating <br/>
![Metaverse4-34](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/0b4c6a0a-6138-43e7-aae0-8695039761ab) <br/>

## Displaying UI
### UI Design Principles
UI is used to display the status or progress of the game, helping users enjoy the game more <br/>
In Unity, a UI component package (a combination of frequently used features in Unity) is provided, allowing for easy UI design <br/>
In this section, we will use the UI component library to display the distance between the car and the flag <br/>
The method to create UI is as follows: <br/>
How to Create UI <br/>
(1) Place UI components in the Scene view <br/>
(2) Write a director script to update the UI <br/>
(3) Create an empty object and apply the written script to it <br/>
First, place the UI components to be used on the screen <br/>
Since this game displays the distance between the car and the flag in text, we use TextMeshPro (a package for displaying text) <br/>
Once Text is placed, write a director script to update the text display and apply it to the director object <br/>
In this chapter, we explain the sequence of (1) placing UI components, and in the next section, we will explain the steps for (2) and (3) <br/>
![Metaverse4-35](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/251fdb16-933e-47f4-94a4-ba9d69c39321) <br/>
### Displaying Distance Using Text 
Create a text UI to display the distance between the car and the flag <br/>
![Metaverse4-35](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/251fdb16-933e-47f4-94a4-ba9d69c39321) <br/>
After pausing the game, click on the + in the Hierarchy window and select UI -> Text - TextMeshPro <br/>
When the TMP Importer window appears, click on Import TMP Essentials and close the window once the import is finished <br/>
![Metaverse4-36](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/c5acacef-3324-4dee-9708-e4315d8ac5d2) <br/>
An object named Canvas is added to the Hierarchy window, and under that Canvas, Text (TMP) is created <br/>
![Metaverse4-37](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/353aa981-9966-4ac1-888c-46dd217aebe7) <br/>
The UI design screen is much larger than a typical game design screen, so the added text may not be visible in the Scene view <br/>
In this case, double-click on Text (TMP) in the Hierarchy window <br/>
The viewpoint moves close to the text coordinates, and the words 'New Text' are displayed in the center of the screen <br/>
![Metaverse4-38](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/4a0627eb-b7cb-4962-bda5-baa13c644765) <br/>
The UI design screen appears very large in the Scene view, but its actual size is adjusted to fit the game screen <br/>
When executed, the UI does not exceed the screen boundaries <br/>
![Metaverse4-38](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/21b3de6e-0de6-474b-a7c2-d32f3a97382a) <br/>
In the Hierarchy window, change the name of Text (TMP) to Distance <br/>
Click on Text (TMP) in the Hierarchy window to select it, and click again to change it to edit mode <br/>
In this state, enter Distance and press Enter to finalize the name <br/>
![Metaverse4-40](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/352d1c4a-ee91-4337-bdc3-d61e678bc977) <br/>
**Tips** <br/>
EventSystem <br/>
When UI Text is added, Canvas and EventSystem are added to the Hierarchy window <br/>
This EventSystem is an object that intermediates between user input and UI components and is essential when using UI <br/>
With EventSystem, you can change input assignments, invalidate them, and alter key and mouse settings <br/>
Next, adjust the position and size of Distance <br/>
Click on Distance in the Hierarchy window and in the Inspector window, set the Rect Transform item's Pos X, Pos Y, Pos Z to 0, 0, 0, Width and Height to 900 and 80, Font Size to 64 <br/>
Click on the color bar of Vertex Color to set the Hexadecimal to 292020, and set the Alignment to center both vertically and horizontally <br/>
![Metaverse4-41](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/119d23ad-0a25-4935-9a7a-29320a2f19db) <br/>
![Metaverse4-42](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/92f9b225-20eb-4101-86be-c4b5b6d6af75) <br/>
![Metaverse4-43](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/c4a379a4-59cd-465c-9907-dfc4c1e593f1) <br/>
**Rect Transform** <br/>
In UI, Rect Transform is used instead of Transform to display the coordinates of components <br/>
In Transform, you can change the position, rotation, and size, while in Rect Transform, you can also change the pivot and anchors in addition to position, rotation, and size <br/>
The pivot is the central coordinate used for rotation or scaling <br/>
Anchors specify the reference position when placing UI resources <br/>
When placing Text(TMP), be careful if the Width and Height values in the Rect Transform section are smaller than the size of the sentence you want to display, as the text may not be displayed properly on the screen <br/>
Place the UI component in the scene and run the game to check if New Text is displayed in the center of the screen <br/>
In the next section, we will display the distance between the car and the flag in the New Text section <br/>
![Metaverse4-44](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/aba8e1ed-286b-48e7-adbe-5c64b5a8362f) <br/>

## Displaying UI
Writing a Script to Update the UI <br/>
Placing text with UI but always displaying it as New Text is meaningless <br/>
Let's write a director script to display the distance between the car and the flag in the New Text section <br/>
The director script investigates the coordinates of the 'car' and 'flag' visible above the Scene view, calculates the distance between the two coordinates, and displays the calculated distance in the UI script we just wrote <br/>
![Metaverse4-43](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/146e7ecf-6a3d-43a2-8e73-ef50822022f7) <br/>
First, let's write the director script. Right-click in the Project window and select <br/>
Create -> C# Script, then change the filename to GameDirector <br/>
Script Writing -> GameDirector <br/>
![Metaverse4-44](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/8164b611-b40e-43f9-b3fa-fe79500de5b9) <br/>
Next, double-click on the GameDirector you created to open the file and enter the script as follows <br/>
```
using System.Collections;
using System.Collections.Generic;
using Unity Engine;
using TMPro; // Necessary for using TextMeshPro

public class GameDirector : MonoBehaviour
{
  GameObject car;
  GameObject flag;
  GameObject distance;

  void Start()
  {
    this.car = GameObject.Find("car");
    this.flag = GameObject.Find("flag");
    this.distance = GameObject.Find("Distance");
  }

  void Update()
  {
    float length = this.flag.transform.position.x - this.car.transform.position.x;
    this.distance.GetComponent<TextMeshProUGUI>().text = "Distance: " + length.ToString("F2") + "m";
  }
}
```
![Metaverse4-45](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/942a4058-ac6d-4271-9b07-25e684992399) <br/>
For each box, you must find and insert the corresponding object within the scene <br/>
Unity provides the Find method to locate objects within a scene <br/>
The Find method takes the object name as an argument and returns the object if an object with that name exists in the game scene <br/>
![Metaverse4-46](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/ddbce06e-715c-401c-bb20-86ad612a8e6b) <br/>
On line 22, the distance calculated in line 21 is assigned to the TextMeshProUGUI component of the distance object <br/>
The script on lines 21~22 may feel like a code at this stage <br/>
To understand the meaning of these two lines, one must understand Unity's components <br/>
Here, it's enough to understand only the part where the ToString method is used to format the display of the distance between the car and the flag to two decimal places <br/>
The ToString method is used to convert a value to a string <br/>
An argument can specify the format in which the value will be displayed <br/>
Among the formats that can be included in the argument, the following are typical: <br/>
![Metaverse4-47](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/a05ca87b-2c06-4d7f-b4b2-9233880b93c8) <br/>
Also, in Chapters 3 and 4, when creating new scripts, we always fixed the frame rate to 60 in the Start method <br/>
However, this process needs to be done only once within a project, so it doesn't need to be added in this script <br/>
### Applying the Script to the Director Object
Just as a script only becomes useful when handed to an actor, it must be passed to an object to be used <br/>
However, there is no visible object to pass the director script to <br/>
Create a completely empty object and pass the script to that object <br/>
A completely empty object transforms into a director object and takes on the director role once it is given the director script <br/>
![Metaverse4-48](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/7dc29417-e910-48ff-b9a7-cfa62dea94c5) <br/>
In the Hierarchy window, click the + and select Create Empty to create an empty object <br/>
Once the GameObject is created in the Hierarchy window, change its name to GameDirector <br/>
![Metaverse4-50](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/9d826a2f-7e1b-4faa-a538-d4bc006088cb) <br/>
![Metaverse4-49](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/377001aa-9970-4c4c-bdd8-a0860d2a39d5) <br/>
Apply the GameDirector script to the created GameDirector object <br/>
Drag & drop the GameDirector script from the Project window onto the GameDirector object in the Hierarchy window <br/>
Currently, the dragged script and the object have the same name, but they do not necessarily have to match <br/>
If you look at the Inspector window, you can see that the GameDirector script has been applied to the GameDirector object <br/>
![Metaverse4-51](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/8dd19e53-32e1-4f8b-ae58-f5bb627fc960) <br/>
Run the game <br/>
According to the director's instructions, the distance between the car and the flag is reflected in the UI in real-time <br/>
![Metaverse4-52](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/75417d11-964f-4f4b-9797-cea9b1e4fea7) <br/>
![Metaverse4-53](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/d8449a30-e361-4b65-8ca8-2c092260b36b) <br/>
The steps to create a director are as follows: <br/>
How to Create a Director <br/>
(1)Write the director script. <br/>
(2)Create an empty object. <br/>
(3)Apply the director script to the empty object. <br/>
When making a game, the UI is usually controlled by the director <br/>
The method 'How to Create a Director' is set just like 'How to Create a Moving Object.' <br/>
It must be clearly understood and properly handled <br/>
**Let's try it!** <br/>
In games, it's very important to properly know whether a challenge was successful or failed <br/>
In the game we've made this time, if the car passes the flag, we want to display 'Game Over' at the top of the screen <br/>
In this case, you just need to modify the Update method a bit in the GameDirector script (here, we'll only show the modified Update method) <br/>
```
void Update()
{
  float length = this.flag.tranform.position.x - this.car.transform.position.x;
  if (length >= 0)
  {
    this.distance.GetComponent<TextMeshProUGUI>().text = "DilstanCe: "+ length.ToString("F2") + "m";
  }
  else 
  {
    this.distance.GetComponent<TextMeshProUGUI>().text = "GameOver";
  }
}
```
Here, we modified it so that if the distance (length) between the car and the flag is greater than or equal to 0, it displays the distance between the current point and the target point, <br/>
and if it is less than 0, it displays as game over <br/> 
Thus, the director not only updates the UI but also assesses the game situation and decides the end of the game <br/>
**Tips** <br/>
Components <br/>
Let's take a closer look at components mentioned earlier <br/>
In Chapter 4, we accessed the car object's coordinates using car.transform.position.x <br/>
It seems like we could just use car.position for the car's coordinates, but the transform variable comes into play <br/>
What exactly is this transform variable and where did it come from? Let's delve deeper <br/>
Unity objects can expand their functionalities by adding (applying) setting data (components) to an empty box called GameObject <br/>
For instance, to physically move an object, you add the Rigidbody component, and to make it produce sound, you add the AudioSource component as mentioned in Section 4.7 <br/>
If you want to enhance its own functionalities, you add a script component (controller scripts and director scripts are also types of components) <br/>
There's also the Transform component, which manages the object's coordinates and rotation <br/>
If the AudioSource component is like a CD player, the Transform component offers functionalities related to the object's movement, like coordinates, rotation, and translation, which is similar to a handle <br/>
![Metaverse4-64](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/599ae8a3-298c-449f-87ce-c0d31e8dbacc) <br/>
Combining this information, let's examine car.transform.position.x <br/>
This accesses the coordinate (position) information within the Transform component applied to the car object (car) <br/>
Here, the necessity of the transform variable becomes apparent <br/>
![Metaverse4-65](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/61e18a5c-4c20-4aec-98fc-0f5541c94835) <br/>
![Metaverse4-66](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/19b18877-0ac0-4b80-9a6d-fda2f900e2a2) <br/>
So how should one access a component? <br/>
To solve this issue, we use the GetComponent method <br/>
GetComponent is a method that, when you ask a game object for a 'ㅇㅇ component, please!', returns the corresponding component (functionality) <br/>
If you want the AudioSource component, you use GetComponent<AudioSource>(), and for the Text component, you use GetComponent<Text>() <br/>
![Metaverse4-66](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/19b18877-0ac0-4b80-9a6d-fda2f900e2a2) <br/>
Having to use GetComponent<Transform>() every time you need to get the coordinates can be quite cumbersome <br/>
For the frequently used Transform component, there is the transform variable, which is a simplified form of GetComponent<Transform>() <br/>
In other words, transform is essentially GetComponent<Transform>() <br/>
![Metaverse4-67](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/19f7bc79-1468-4b91-a0db-af49ce9faa0c) <br/>
Also, since scripts you create yourself are a type of component, you can use the GetComponent method to obtain them <br/>
If you have implemented a Run method in the CarController script, you can call the Run method of the CarController script applied to the car object with car.GetComponent<CarController>().Run() <br/>
Scripts that call methods using GetComponent will continue to appear <br/>
Let's properly understand the relationship between objects and components <br/>
How to Access Components of Other Objects <br/>
(1)Find the object using the Find method <br/>
(2)Obtain the object's component using the GetComponent method <br/>
(3)Access the data held by the component <br/>















## Adding Sound Effects When the Car Moves
Finally, we add sound effects to the car <br/>
Sound effects are an important element that makes games enjoyable <br/>
When making a game, people sometimes do not consider the sound very important and just add it carelessly, but this is a mistaken approach <br/>
Adding suitable sound effects to a game can make it more enjoyable and increase the overall quality of the game <br/>

### How to Use the AudioSource Component
In Unity, sound effects are produced using the AudioSource component <br/>
Let's try adding a 'whoosh' sound effect when swiping using the AudioSource component <br/>
To produce sound effects, follow these three steps: <br/>
How to Produce Sound Effects <br/>
(1)Apply the AudioSource component to the object that will make the sound <br/>
(2)Set the sound effect in the AudioSource component <br/>
(3)Call the Play method when you want to play the sound effect, such as during a swipe <br/>
### Applying the AudioSource Component
The AudioSource component is like a CD player <br/>
Just as you set a disc (music file) in a CD player to play your favorite sounds, you set up an AudioSource (CD player) in the car object so that the car can make sound effects <br/>
![Metaverse4-54](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/c3fc2ea9-568f-4a78-93dc-5703fe39ad5b) <br/>
Since the AudioSource component needs to be applied to the car object, click on car in the Hierarchy window <br/>
In the Inspector window, click on Add Component and select Audio -> Audio Source <br/>
![Metaverse4-55](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/c69039a2-2bde-4962-ae64-d063d9564d5a) <br/>
![Metaverse4-56](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/16774c9d-5697-43e8-8a93-b7c8c5eaa76b) <br/>
### Setting the Sound Effect
Next, let's set the disc (music file) in the CD player <br/>
Click on car in the Hierarchy window <br/>
Drag & drop car_se from the Project window into the AudioClip slot of the Audio Source section in the Inspector window <br/>
Uncheck Play On Awake <br/>
![Metaverse4-58](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/89e624ac-1a40-4feb-9b15-a82bf56b271e) <br/>
![Metaverse4-57](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/688b7057-d1e3-40b5-8e9d-235d9c1eb8b1) <br/>

### Playing Sound from a Script
To play the sound effect, the Play method of the AudioSource component must be called from the script <br/>
Since the AudioSource component has been applied to the car object, let's try calling the Play method from the applied script (CarController) <br/>
![Metaverse4-59](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/a3d60c2d-d64e-4f09-bf6c-6c24872d5ff5) <br/>
Double-click on the CarController script in the Project window <br/>
Once the script is open, add the process for making the sound effect <br/>
```
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class CarController : MonoBehaviour
{
  float speed = 0;
  Vector2 startPos;

  void Start()
  {
    Application.targetFrameRate = 60;
  }
  
  void Update()
  {
    //Calculates the swipe length.
    if (Input.GetMouseButtonDown(0))
    {
      //Coordinates where the mouse is clicked
      this.startPos = Input.mousePosition;
    }
    else if (Input.GetMouseButtonUp(0))
    {
      //Coordinates when the finger is lifted off the mouse button
      Vector2 endPos = Input.mousePosition;
      float swipeLength = endPos.x - this.startPos.x;

      //Converts the swipe length to initial speed
      this.speed = swipeLength / 500.0f;

      //Plays the sound effect
      GetComponent<AudioSource>().Play();
    }
  transform.Translate(this.speed, 0, 0);  //Moves
  this.speed *= 0.98f;  //Decelerates
  }
}
```
Add a script to play the sound effect on line 33, so that the sound effect plays the moment the finger lifts off the left mouse button after swiping the car <br/>
Retrieve the AudioSource component with GetComponent<AudioSource>(), and call the Play method of the AudioSource component <br/>
Run the game and try swiping the car <br/>
The sound effect plays at the moment of swiping <br/>
Using Unity, it's been found that adding sound effects is straightforward <br/>
This section taught how to add sound effects <br/>
Observing in detail where and what kind of sound effects are added while playing popular games is helpful  <br/>
**Tips** <br/>
Types and extensions of audio files that can be used <br/>
Unity supports a wide range of audio file formats <br/>
The following are the main file formats: <br/>
The rest of the audio formats can be checked on the Unity website  <br/>
![Metaverse4-60](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/7de22e22-3e5d-4037-8bad-2f2188aa9624) <br/>
**Tips** <br/>
How to Display Korean with TextMeshPro <br/>
TextMeshPro cannot display Korean by default <br/>
To display Korean, follow these steps: <br/>
First, search for and download the font file you want to use from the web <br/>
The font file extensions that can be used in Unity are .ttf or .otf <br/>
After downloading the font file, drag & drop it into the Project window <br/>
Next, create a sprite font <br/>
A sprite font is all the characters used in the app drawn on a sprite <br/>
To create a sprite font, select Window -> TextMeshPro -> Font Asset Creator from the toolbar <br/>
When the Font Asset Creator window opens, specify the font file you added to the project earlier as the Source Font File <br/>
Set the Character Set to Custom Characters, and enter all the Korean characters used in the app into the Custom Character List <br/>
Then, click Generate Font Atlas and click Save <br/>
![Metaverse4-61](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/0b243afb-43ab-468b-8fae-b0f5cb4ff5d2) <br/>
Enter a name and specify a folder under Assets for the save location, then click Save <br/>
With this, you have created a sprite font <br/>
![Metaverse4-62](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/c150fc4e-11df-4e2f-b0fd-d6c88f682b95) <br/>
Set up the created sprite font for use in the UI <br/>
In the Hierarchy window, select the Text (TMP) object where you want to display Korean <br/>
In the Inspector window, under the TextMeshPro - Text component, click on Font Asset -> None and select the sprite font you created <br/>
With this, you can display Korean in TextMeshPro <br/>
![Metaverse4-63](https://github.com/growingpenguin/growingpenguin.github.io/assets/110277903/986b0e4f-037e-47c1-834a-df498dd9df18) <br/>

## Try Moving on a Smartphone
































































Reference: <br/>
유니티 교과서 4장 <br/>
